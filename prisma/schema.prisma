// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Vocab {
  id               String   @id @default(cuid())
  word             String
  translation      String
  originalSentence String   
  mastered         Boolean  @default(false)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([createdAt]) // Optimasi untuk "Order By Newest"
  @@index([word])      // Optimasi untuk pencarian/duplikasi
}

model History {
  id        String   @id @default(cuid())
  feature   String   
  details   String   
  source    String   
  tokens    Int      @default(0)
  createdAt DateTime @default(now())

  @@index([createdAt]) // Critical untuk Dashboard History Log
}

model DailyProgress {
  id        String   @id @default(cuid())
  date      String   @unique 
  targets   String[] 
  memorized String[] 
  completed String[] 
  meanings  Json     @default("{}") 
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([date]) // Lookup harian lebih cepat
}

model Story {
  id        Int      @id @default(autoincrement())
  english   String
  source    String   
  createdAt DateTime @default(now())
}

model GrammarQuestion {
  id           String   @id @default(cuid())
  question     String
  options      String[] 
  correctIndex Int
  explanation  String
  difficulty   String   
  createdAt    DateTime @default(now())

  @@index([difficulty]) // Optimasi filter level soal
}